<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Email Generator</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 2rem; max-width: 900px; }
    label { display:block; margin-top: 1rem; font-weight:600; }
    select, input, textarea { width:100%; padding: .6rem; margin-top:.4rem; }
    .row { display:flex; gap:1rem; flex-wrap:wrap; }
    .col { flex:1 1 280px; }
    .btns { display:flex; gap:.6rem; margin-top:1rem; flex-wrap:wrap; }
    button { padding:.6rem .9rem; cursor:pointer; }
    .card { border:1px solid #ddd; border-radius:8px; padding:1rem; margin-top:1.5rem; background:#fafafa; }
    .small { color:#666; font-size:.9rem; }
    footer { margin-top:2rem; color:#777; font-size:.9rem; }
  </style>
</head>
<body>
  <h1>Email Text Generator</h1>
  <p class="small">Select the recipient’s profession and location to generate a tailored email. Edit as needed, then copy or open in your email app.</p>

  <div class="row">
    <div class="col">
      <label for="profession">Recipient profession</label>
      <select id="profession">
        <option value="" selected disabled>Choose…</option>
        <option value="university_professor">University Professor</option>
        <option value="industry_researcher">Industry Researcher</option>
        <option value="journal_editor">Journal Editor</option>
        <option value="government_official">Government Official</option>
        <option value="student">Student</option>
      </select>
    </div>

    <div class="col">
      <label for="location">Recipient location</label>
      <select id="location">
        <option value="" selected disabled>Choose…</option>
        <option value="uk">United Kingdom</option>
        <option value="us">United States</option>
        <option value="eu">European Union</option>
        <option value="jp">Japan</option>
        <option value="br">Brazil</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <label for="tone">Tone</label>
      <select id="tone">
        <option value="neutral" selected>Neutral</option>
        <option value="formal">Formal</option>
        <option value="friendly">Friendly</option>
        <option value="concise">Concise</option>
      </select>
    </div>
    <div class="col">
      <label for="subject">Email subject (optional)</label>
      <input id="subject" placeholder="e.g., Collaboration Inquiry on Neutrino Measurements" />
    </div>
  </div>

  <div class="row">
    <div class="col">
      <label for="recipientName">Recipient name (optional)</label>
      <input id="recipientName" placeholder="e.g., Dr. Smith" />
    </div>
    <div class="col">
      <label for="senderName">Your name/signature</label>
      <input id="senderName" placeholder="e.g., Thiago Sogo Bezerra" />
    </div>
  </div>

  <label for="extra">Extra details to include (optional)</label>
  <textarea id="extra" rows="3" placeholder="Context, links, or specific ask…"></textarea>

  <div class="btns">
    <button id="generateBtn">Generate Email</button>
    <button id="copyBtn" disabled>Copy Email</button>
    <button id="mailtoBtn" disabled>Open in Email App</button>
  </div>

  <div class="card">
    <label for="output">Generated email</label>
    <textarea id="output" rows="16" spellcheck="false"></textarea>
  </div>

  <footer>Tip: You can add or change templates in the <code>TEMPLATES</code> section of this file.</footer>

  <script>
    const TEMPLATES = {
      university_professor: {
        uk: {
          subject: "Exploring potential collaboration",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Dear ${recipientName},` : "Dear Professor,";
            const toneLine = {
              formal: "I hope this message finds you well.",
              neutral: "I hope you're well.",
              friendly: "Hope you're doing well!",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} I'm reaching out regarding potential collaboration on precision measurements relevant to neutrino physics. Your group's work in the UK aligns closely with our recent progress on AI-driven reconstruction and classification for detector data.

${extra ? extra + "\n\n" : ""}If you're open to it, I'd welcome a brief call to discuss overlap and a possible joint pilot.

Kind regards,
${senderName || ""}`;
          }
        },
        us: {
          subject: "Brief intro and potential research alignment",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Hello ${recipientName},` : "Hello Professor,";
            const toneLine = {
              formal: "I hope this note finds you well.",
              neutral: "I hope you're well.",
              friendly: "Hope all's well!",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} I'm writing to see if there might be alignment between your group's interests and our recent work using AI to enhance event reconstruction in neutrino detectors.

${extra ? extra + "\n\n" : ""}Would you be open to a short call to compare notes?

Best regards,
${senderName || ""}`;
          }
        }
      },
      industry_researcher: {
        eu: {
          subject: "Quick chat about applied AI for detectors",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Hi ${recipientName},` : "Hi there,";
            const toneLine = {
              formal: "I’m contacting you regarding potential collaboration.",
              neutral: "Reaching out about potential collaboration.",
              friendly: "Reaching out—would love to compare approaches.",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} We’re applying AI for signal classification and precision measurements in detector environments and I think there may be clear application in your EU-focused projects.

${extra ? extra + "\n\n" : ""}Open to a 20‑minute intro call?

Thanks,
${senderName || ""}`;
          }
        }
      },
      journal_editor: {
        jp: {
          subject: "Potential submission—AI for neutrino detector analysis",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Dear ${recipientName},` : "Dear Editor,";
            const toneLine = {
              formal: "I would like to inquire about fit and scope.",
              neutral: "I’d like to ask about scope/fit.",
              friendly: "Quick question on scope/fit.",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} We’re preparing a manuscript on AI‑driven precision measurements and detector event reconstruction.

${extra ? extra + "\n\n" : ""}Would this be appropriate for consideration in your journal?

Sincerely,
${senderName || ""}`;
          }
        }
      },
      government_official: {
        br: {
          subject: "Short briefing request",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Prezado(a) ${recipientName},` : "Prezado(a),";
            const toneLine = {
              formal: "Solicito a possibilidade de uma breve apresentação técnica.",
              neutral: "Gostaria de propor uma breve apresentação técnica.",
              friendly: "Podemos marcar uma conversa rápida?",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} O tema é aplicação de IA para análises em detectores e possíveis impactos em projetos nacionais.

${extra ? extra + "\n\n" : ""}Agradeço a atenção.
${senderName || ""}`;
          }
        }
      },
      student: {
        us: {
          subject: "Mentorship / project discussion",
          body: ({recipientName, tone, extra, senderName}) => {
            const greet = recipientName ? `Hi ${recipientName},` : "Hi,";
            const toneLine = {
              formal: "I’m reaching out regarding potential mentorship.",
              neutral: "I’m reaching out about potential mentorship.",
              friendly: "I’d love to chat about mentorship and projects.",
              concise: ""
            }[tone];
            return `${greet}

${toneLine} I can share materials on AI‑assisted analysis in neutrino physics and suggest next steps.

${extra ? extra + "\n\n" : ""}Would a quick call work?

Best,
${senderName || ""}`;
          }
        }
      }
    };

    function generateEmail() {
      const profession = document.getElementById('profession').value;
      const location = document.getElementById('location').value;
      const tone = document.getElementById('tone').value;
      const recipientName = document.getElementById('recipientName').value.trim();
      const senderName = document.getElementById('senderName').value.trim();
      const extra = document.getElementById('extra').value.trim();
      const subjectOverride = document.getElementById('subject').value.trim();
      const out = document.getElementById('output');

      if (!profession || !location) {
        out.value = "Please select both profession and location.";
        return { subject: "", body: out.value };
      }

      const prof = TEMPLATES[profession] || {};
      const loc = prof[location];

      if (!loc) {
        out.value = "No template for this profession + location yet. Please add one in TEMPLATES.";
        return { subject: "", body: out.value };
      }

      const subject = subjectOverride || loc.subject || "Re:";
      const body = loc.body({ recipientName, tone, extra, senderName });
      out.value = `Subject: ${subject}\n\n${body}`;
      document.getElementById('copyBtn').disabled = false;
      document.getElementById('mailtoBtn').disabled = false;

      return { subject, body };
    }

    function mailtoLink(subject, body) {
      const s = encodeURIComponent(subject);
      const b = encodeURIComponent(body);
      return `mailto:?subject=${s}&body=${b}`;
    }

    document.getElementById('generateBtn').addEventListener('click', () => generateEmail());

    document.getElementById('copyBtn').addEventListener('click', async () => {
      const text = document.getElementById('output').value;
      try {
        await navigator.clipboard.writeText(text);
        alert('Copied to clipboard.');
      } catch {
        // Fallback
        document.getElementById('output').select();
        document.execCommand('copy');
        alert('Copied (fallback).');
      }
    });

    document.getElementById('mailtoBtn').addEventListener('click', () => {
      const { subject, body } = generateEmail();
      if (subject && body) window.location.href = mailtoLink(subject, body);
    });
  </script>
</body>
</html>
