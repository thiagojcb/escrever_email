<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Politician Email Generator</title>
<style>
  body { font-family: Arial, sans-serif; margin: 2rem; max-width: 600px; }
  .hidden { display: none; }
  label { font-weight: bold; margin-top: 1rem; display:block; }
  select, textarea { width: 100%; padding: .5rem; margin-top: .3rem; }
  button { margin-top: 1rem; padding: .6rem 1rem; }
</style>
</head>
<body>
<h1>Email Generator for Politicians</h1>

<!-- Step 1 -->
<label for="type">Step 1: Choose type of politician</label>
<select id="type">
  <option value="" selected disabled>Select...</option>
  <option value="leader">Party Leader</option>
  <option value="mp">Member of Parliament</option>
</select>

<!-- Step 2: Party -->
<div id="partyDiv" class="hidden">
  <label for="party">Step 2: Choose Party</label>
  <select id="party">
    <option value="" selected disabled>Select party...</option>
    <option value="partyA">Party A</option>
    <option value="partyB">Party B</option>
    <option value="partyC">Party C</option>
  </select>
</div>

<!-- Step 2: State -->
<div id="stateDiv" class="hidden">
  <label for="state">Step 2: Choose State</label>
  <select id="state">
    <option value="" selected disabled>Select state...</option>
    <option value="state1">State 1</option>
    <option value="state2">State 2</option>
    <option value="state3">State 3</option>
  </select>
</div>

<!-- Step 3: Politician -->
<div id="politicianDiv" class="hidden">
  <label for="politician">Step 3: Choose Politician</label>
  <select id="politician">
    <option value="" selected disabled>Select politician...</option>
    <!-- Will populate dynamically based on state -->
  </select>
</div>

<button id="generateBtn" class="hidden">Generate Email</button>

<!-- Output -->
<div id="outputDiv" class="hidden">
  <label for="output">Generated Email</label>
  <textarea id="output" rows="10"></textarea>
  <button id="copyBtn">Copy Email</button>
</div>

<script>
const typeSelect = document.getElementById('type');
const partyDiv = document.getElementById('partyDiv');
const stateDiv = document.getElementById('stateDiv');
const politicianDiv = document.getElementById('politicianDiv');
const generateBtn = document.getElementById('generateBtn');
const outputDiv = document.getElementById('outputDiv');
const output = document.getElementById('output');
const copyBtn = document.getElementById('copyBtn');

const politicianOptions = {
  state1: ['Alice Johnson', 'Bob Smith'],
  state2: ['Carlos Mendes', 'Diana Lee'],
  state3: ['Eva Brown', 'Frank White']
};

typeSelect.addEventListener('change', () => {
  if (typeSelect.value === 'leader') {
    partyDiv.classList.remove('hidden');
    stateDiv.classList.add('hidden');
    politicianDiv.classList.add('hidden');
  } else if (typeSelect.value === 'mp') {
    stateDiv.classList.remove('hidden');
    partyDiv.classList.add('hidden');
  }
});

document.getElementById('state').addEventListener('change', (e) => {
  const state = e.target.value;
  const polSelect = document.getElementById('politician');
  polSelect.innerHTML = '<option value="" disabled selected>Select politician...</option>';
  politicianOptions[state].forEach(name => {
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    polSelect.appendChild(opt);
  });
  politicianDiv.classList.remove('hidden');
});

document.getElementById('party').addEventListener('change', () => {
  generateBtn.classList.remove('hidden');
});

document.getElementById('politician').addEventListener('change', () => {
  generateBtn.classList.remove('hidden');
});

generateBtn.addEventListener('click', () => {
  const type = typeSelect.value;
  let emailText = '';
  if (type === 'leader') {
    const party = document.getElementById('party').value;
    emailText = `Subject: Request for Meeting\n\nDear ${party} Party Leader,\n\nI am writing to discuss important issues affecting our community. Your leadership is crucial in shaping policies that matter to us.\n\nBest regards,\n[Your Name]`;
  } else {
    const state = document.getElementById('state').value;
    const politician = document.getElementById('politician').value;
    emailText = `Subject: Concern from ${state}\n\nDear ${politician},\n\nAs a constituent from ${state}, I would like to share my thoughts on recent developments and seek your support on key matters.\n\nSincerely,\n[Your Name]`;
  }
  output.value = emailText;
  outputDiv.classList.remove('hidden');
});

copyBtn.addEventListener('click', async () => {
  await navigator.clipboard.writeText(output.value);
  alert('Email copied to clipboard!');
});
</script>
</body>
</html>
